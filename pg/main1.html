<!DOCTYPE html>


<html lang="en" dir="ltr">
<head>
  <link rel="stylesheet" href="css/master.css">
  <meta charset="utf-8">
  <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />
  <script type="text/javascript">
        msg = " - ";
        msg = " Chocolate game! " + msg;position = 0;
        function scrolltitle() {
            document.title = msg.substring(position, msg.length) + msg.substring(0, position); position++;
            if (position > msg.length) position = 0
            window.setTimeout("scrolltitle()", 400);
        }
    scrolltitle();
        </script>
      </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.9.2/TweenMax.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="js/brython.js"></script>
  <script type="text/javascript" src="js/brython_stdlib.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
  <script type="text/javascript">
  $(document).ready(function(){
    $('.cta').css({ 'text-align':'center' });
    var h1 = $('h1').height();
    var h = h1/2;
    var w1 = $(window).height();
    var w = w1/2;
    var m = w - h
    $('.cta').css("margin-top",m + "px")
  });
  </script>
</head>

<body class="disable-select">
  <script type="text/javascript">
  document.addEventListener('contextmenu', event => event.preventDefault());
</script>
    <h1 class="superShadow"> Chocolat(e)! </h1>
<script type="text/javascript">
//animation powered by GSAP JS
//http:www.greensock.com/gsap-js/


$("h1").each(function(index, element){
  var animation = TweenMax.to(this, 0.2, {
    className: '+= superShadow1',
    marginTop: '0px',
    marginBottom: '0px',
    ease: Power1.easeIn,
    paused:true,
  });
  element.animation = animation;
})


$('h1').hover(function(){
 this.animation.play()
}, function(){
 this.animation.reverse();
})
</script>
<div class="wrapper">
  <a class="cta" href="#">
    <span>PLAY</span>
    <span>
      <svg iwidth="60px" fill="#997B75" height="43px" viewBox="0 0 66 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <g id="arrow" stroke="none" stroke-width="1" fill="#997B75" fill-rule="evenodd">
          <path class="one" d="M40.1543933,3.89485454 L43.9763149,0.139296592 C44.1708311,-0.0518420739 44.4826329,-0.0518571125 44.6771675,0.139262789 L65.6916134,20.7848311 C66.0855801,21.1718824 66.0911863,21.8050225 65.704135,22.1989893 C65.7000188,22.2031791 65.6958657,22.2073326 65.6916762,22.2114492 L44.677098,42.8607841 C44.4825957,43.0519059 44.1708242,43.0519358 43.9762853,42.8608513 L40.1545186,39.1069479 C39.9575152,38.9134427 39.9546793,38.5968729 40.1481845,38.3998695 C40.1502893,38.3977268 40.1524132,38.395603 40.1545562,38.3934985 L56.9937789,21.8567812 C57.1908028,21.6632968 57.193672,21.3467273 57.0001876,21.1497035 C56.9980647,21.1475418 56.9959223,21.1453995 56.9937605,21.1432767 L40.1545208,4.60825197 C39.9574869,4.41477773 39.9546013,4.09820839 40.1480756,3.90117456 C40.1501626,3.89904911 40.1522686,3.89694235 40.1543933,3.89485454 Z" fill="#FFFFFF"></path>
          <path class="two" d="M20.1543933,3.89485454 L23.9763149,0.139296592 C24.1708311,-0.0518420739 24.4826329,-0.0518571125 24.6771675,0.139262789 L45.6916134,20.7848311 C46.0855801,21.1718824 46.0911863,21.8050225 45.704135,22.1989893 C45.7000188,22.2031791 45.6958657,22.2073326 45.6916762,22.2114492 L24.677098,42.8607841 C24.4825957,43.0519059 24.1708242,43.0519358 23.9762853,42.8608513 L20.1545186,39.1069479 C19.9575152,38.9134427 19.9546793,38.5968729 20.1481845,38.3998695 C20.1502893,38.3977268 20.1524132,38.395603 20.1545562,38.3934985 L36.9937789,21.8567812 C37.1908028,21.6632968 37.193672,21.3467273 37.0001876,21.1497035 C36.9980647,21.1475418 36.9959223,21.1453995 36.9937605,21.1432767 L20.1545208,4.60825197 C19.9574869,4.41477773 19.9546013,4.09820839 20.1480756,3.90117456 C20.1501626,3.89904911 20.1522686,3.89694235 20.1543933,3.89485454 Z" fill="#FFFFFF"></path>
          <path class="three" d="M0.154393339,3.89485454 L3.97631488,0.139296592 C4.17083111,-0.0518420739 4.48263286,-0.0518571125 4.67716753,0.139262789 L25.6916134,20.7848311 C26.0855801,21.1718824 26.0911863,21.8050225 25.704135,22.1989893 C25.7000188,22.2031791 25.6958657,22.2073326 25.6916762,22.2114492 L4.67709797,42.8607841 C4.48259567,43.0519059 4.17082418,43.0519358 3.97628526,42.8608513 L0.154518591,39.1069479 C-0.0424848215,38.9134427 -0.0453206733,38.5968729 0.148184538,38.3998695 C0.150289256,38.3977268 0.152413239,38.395603 0.154556228,38.3934985 L16.9937789,21.8567812 C17.1908028,21.6632968 17.193672,21.3467273 17.0001876,21.1497035 C16.9980647,21.1475418 16.9959223,21.1453995 16.9937605,21.1432767 L0.15452076,4.60825197 C-0.0425130651,4.41477773 -0.0453986756,4.09820839 0.148075568,3.90117456 C0.150162624,3.89904911 0.152268631,3.89694235 0.154393339,3.89485454 Z" fill="#FFFFFF"></path>
        </g>
      </svg>
    </span>
  </a>
</div>

</body>

<body onload="brython({debug: 1, indexedDB: false})">
  <script type="text/python">
  from copy import deepcopy
  from random import randrange
  from math import floor
  from time import *

  #================================== Versions ===============================#
  #                                                                           #
  #   v1.0 : 1v1                                                              #
  #   v1.1 : IA aleatoire                                                     #
  #   v1.2 : IA intelligente(debut) + choix de la taille du plateau           #
  #   v1.3 : l'IA regarde 4 coup dans le future                               #
  #   v1.3.1 : choix de la difficulter de l'IA                                #
  #   v1.4 : test/debut de l'algorithme "alpha/beta"                          #
  #
  #
  #




  #==================================== Outil ===============================#


  def ResetGrid(x_size,y_size):
      """
      f( int , int ) -> list
      retourne la liste pour la partie avec la taille voulut"""
      # Met la liste gridRest avec que des 1 avec y_size pour hauteur
      # et x_size pour largeur
      gridReset = []
      for i in range(y_size):
          x_liste = []
          for j in range(x_size):
              x_liste += [1]
          gridReset += [x_liste]
      return gridReset


  def NombrePosition(gridTest):
      """
      f( list ) -> int
      retourne le nombre de 1 present dans la liste en argument"""
      nombre = 0
      for i in range(len(gridTest)):
          for j in range(len(gridTest[0])):
              # compte le nombre de 1
              if gridTest[i][j] == 1:
                  nombre += 1
      return nombre


  def Remplace(x,y,gridModifie):
      """
      f( int , int , list ) -> list
      retourne la liste entree en argument en lui changeant la ligne x
      (en argument)et la colonne (y en argument)"""
      # remplace a droite de la position jouer en (x;y)
      save = gridModifie[y-1]
      for i in range(len(save)):
          if i+1 >= x:
              save[i] = 0
      gridModifie[y-1] = save

      # remplace en bas de la position jouer en (x;y)
      for i in range(y):
          save = gridModifie[i]
          save[x-1] = 0
          gridModifie[i] = save
      return gridModifie


  def Contient(gridTest):
      """
      f( list ) -> bool
      retourne True si la liste en argument contient 1 et False sinon"""

      # verifie que la liste gridTest contient encore une cases non utiliser
      if NombrePosition(gridTest) == 0:
          return False
      return True


  def possible(x,y,grid):
      """
      f( str, str , list ) -> bool
      retourne False si la position x;y (entre en argument) est  un 1
      utilise VerifInput( str , int )"""

      if VerifInput(x,len(grid[0])) or VerifInput(y,len(grid)):
          return True
      # verifie si on peut jouer a une position (x;y)
      x = int(x)
      y = int(y)
      if grid[y-1][x-1] == 1:
          return False
      return True


  def VerifInput(char,maxi):
      """
      f( str , int ) -> bool
      retourne False si une chaine de caractere est valide et True sinon
      (c'est pour l'entre de l'utilisateur)"""

      # Evite que l'input soit faux
      if char == "":
          return True
      if type(char) != str:
          return True
      # Verifie si char est un input acceptable ou non
      charPossible = ["1","2","3","4","5","6","7","8","9","0"]
      for i in char:
          valid = False
          for j in charPossible:
              if j == i:
                  valid = True
          if valid == False:
              return True
      # Evite que l'input 0 soit renvoyer alors quelle n'est pas valide
      # Alors que 10 ou 20 le sont
      if char == "0":
          return True
      # Evite de jouer en dehors du plateau
      if int(char) > maxi:
          return True

      # Si le programme arrive ici c'est que tout est bon donc il retourne False
      return False


  def MontreJeu(grid):
      """
      f( list )
      permet l'affichage de la liste en argument soit le plateau"""

      for i in range(len(grid)):
          # affiche chaque element de la listedans la console
          print(grid[len(grid)-i-1])









  #=============================== IA developpement ==========================#


  ################################# IA aleatoire ##############################

  def IA_aleatoire(grid):
      """
      f( list ) -> list
      retourne une position aleatoire
      utilise:
      possible( int , int or str , list ) et Remplace( int , int , list )"""

      # Recupere toutes les possibilites de jouer et les met dans pos
      pos = []
      for i in range(len(grid)):
          entre = grid[i]
          for j in range(len(entre)):
              if entre[j] == 1:
                  pos += [[j+1,i+1]]
      # Prend aleatoirement une position a jouer dans pos
      rando = pos[randrange(0,len(pos))]
      x = rando[0]
      y = rando[1]

      # Retourne la liste modifiee
      return Remplace(x,y,grid)

  ################################ IA 'intelligente' #############################

  def Eval(Evaluation):
      """
      f( list ) -> list
      retourne toutes les position possible de jouer au coup suivant
      (fait pour evaluer les possibilites de l'IA)"""
      newPosition = []
      for loop1 in range(len(Evaluation)):
          EvalX = Evaluation[loop1]
          for loop2 in range(len(EvalX)):
              if EvalX[loop2] != 0:
                  # calcul le prochain coup
                  newPosition += [[loop2+1,loop1+1]] + [Remplace(loop2+1,loop1+1,deepcopy(Evaluation))]
      return newPosition


  def ScoreCounter(grid,coup,player):
      """
      f( list , int , int ) -> int
      retourne le score pour l'IA ou l'utilisateur en fonction de la position"""

      Score = 0

      # calcule le score du coup de l'IA
      if Contient(grid) and player == 1:
          if NombrePosition(grid) == 1:
              Score += coup * 10
          elif NombrePosition(grid) > 1:
              Score += coup
          else :
              Score -= coup * 2

      # calcule le score du coup apres l'IA par l'utilisateur
      if NombrePosition(grid) > 1 and player == 2:
              Score += coup
      return Score




  def CalculScore(Grid,position,best):
      """
      f( list , int , int ) -> int
      retourne le score de la position Grid en argument
      et des 3 coups suivants (mais plus est possible XD) """
      coup = 10
      Score = 0

      # calcule le coup de l'IA

      Score += ScoreCounter(deepcopy(Grid[(position*2)+1]),coup,1)
      Tour2 = Eval(Grid[(position*2)+1])

      # calcule le score du coup apres l'IA par l'utilisateur
      coup -= 1
      for toure2 in range(int(len(Tour2)/2)):
          Score += ScoreCounter(deepcopy(Tour2[(toure2*2)+1]),coup,2)

          if NombrePosition(Tour2[(toure2*2)+1]) > 0 and Score > (best/2):
              Tour3 = Eval(Tour2[(toure2*2)+1])
              coup -= 1

              # calcule le coup de l'IA apres l'utilisateur
              for toure3 in range(int(len(Tour3)/2)):
                  Score += ScoreCounter(deepcopy(Tour3[(toure3*2)+1]),coup,1)

                  if NombrePosition(Tour3[(toure3*2)+1]) > 0 and Score < (best* (2/3)):
                      Tour4 = Eval(Tour3[(toure3*2)+1])
                      coup -= 1

                      # calcule le coup de l'utilisateur apres
                      # l'IA qui est apres l'utilisateur
                      for toure4 in range(int(len(Tour4)/2)):
                          Score += ScoreCounter(deepcopy(Tour4[(toure4*2)+1]),coup,2)

      # retourne le score total de la position Grid[(position*2)+1]
      return Score








  def IA_EvaluPossibilite(gridEval):
      """
      f( list ) -> list
      retourne les scores calcules a partir des evaluations de la
      fonction Eval( list ) et CalculScore( list , int , int )"""
      ScoreEval = []
      Tour1 = Eval(gridEval)
      Best = -100000000
      for toure1 in range(int(len(Tour1)/2)):
          # Calcule le score de la position Tour1[toure1*2]
          # (le premier coup est a 10 et decroit de 1 a chaque fois)
          ScoreCoup = CalculScore(Tour1,toure1,Best)
          if ScoreCoup > Best:
              Best = ScoreCoup
          ScoreEval += [Tour1[toure1*2],ScoreCoup]
      print(ScoreEval)
      return ScoreEval


  def IA_forte(IA):
      """
      f( list ) -> list
      retourne le meilleur score des positions (et si plusieurs on le meme
      c'est de l'aleatoire qui decide pour eviter les repetitions)
      calcule avec IA_EvaluPossibilite( list ) et utilise
      Remplace( int , int , list )"""

      AllScore = IA_EvaluPossibilite(IA)
      best = -1000000000
      for evalu in range(int(len(AllScore)/2)):
          if AllScore[(evalu*2)+1] > best:
              best = AllScore[(evalu*2)+1]
              bestPosition = AllScore[(evalu*2)]
          elif AllScore[(evalu*2)+1] == best and randrange(0,1) == 0:
              bestPosition = AllScore[(evalu*2)]
      print("l'IA jou en " + str(bestPosition))
      return Remplace(int(bestPosition[0]),int(bestPosition[1]),IA)


  #================================== Main game ==============================#



  def Game_IA(x_size,y_size):
      """
      permet de jouer contre une IA jouant aleatoirement pour l'instant
      fait l'affichage de la partie
      utilise Contient( int , int , list ), possible( int , int or str , list )
      et Remplace( int , int , list ) et IA_nul( list ) et ResetGrid( int , int )"""

      # Remet le jeu a zero et fait la partie contre l'IA

      grid = list(ResetGrid(x_size,y_size))
      print("Entrez la difficulter de l'IA(max=10 / min=1, difficulter aleatoire par defaut)")
      print("/!\ SI LE PLATEAU A UNE TAILLE SUPERIEUR A 10x10 N'UTILISEZ PAS L'IA FORTE !!")
      difficulter = input()
      if not(VerifInput(difficulter,10)):
          difficulter = int(difficulter)
      else:
          if x_size * y_size < 65:
              difficulter = randrange(1,10)
          else:
              difficulter = 1
      print("Difficulter choisie : " + str(difficulter))
      joueur = randrange(0,1)
      if joueur == 1:
          print("L'IA commence")
      else:
          print("A vous de jouer")

      # Continut tant que l'on peut jouer
      # bref tant que la liste grid contient des 1
      while Contient(grid):
          if joueur == 0:
              # evite du code innutile (repetion de la boucle while)
              x = "no"
              y = 0
              while possible(x,y,grid):
                  if x != "no":
                      print("mauvaise entre")
                  MontreJeu(grid)
                  print("joueur: " + str(joueur + 1))
                  print("Quelle valeur de x? ")
                  x = input()
                  print("Quelle valeur de y? ")
                  y = input()

              # L'entree est correct donc on joue:
              grid = Remplace(int(x),int(y),deepcopy(grid))
          else:
              print("Tour de l'IA")
              if randrange(1,difficulter) == 0 and difficulter != 10:
                  # Fait jouer l'IA debile
                  grid = IA_aleatoire(grid)
              else:
                  # Fait joure l'IA intelligente
                  t = time()
                  grid = IA_forte(deepcopy(grid))
                  print(time()-t)
          joueur = 1 - joueur
      MontreJeu(grid)
      if joueur == 0:
          print("Vous avez gagner!!!!")
      else:
          print("L'IA a gagner !!")



  def JoueurContreJoueur(x_size,y_size):
      """
      permet de jouer a deux (joueur vs joueur)
      utilise Remplace( int , int , list ),
      possible( int , int or str  , list ), Contient( list )
      et ResetGrid( int , int )"""

      # permet de faire joueur vs joueur avec l'affichage
      grid = ResetGrid(x_size,y_size)
      joueur = randrange(0,1)
      # Permet de nommer les joueur (par-ce que 'why not????')
      print("Voulez vous nommer les joueur ? (OUI/NON)")
      reponse = input()
      if reponse == "OUI" or reponse == "oui":
          joueurName = []
          print("Nom du premier :")
          joueurName += [input()]
          print("Nom du second :")
          joueurName += [input()]
      else:
          joueurName = ["1","2"]
      while Contient(grid):
          x = ""
          y = ""
          while possible(x,y,grid):
              MontreJeu(grid)
              if x != "" and y != "":
                  print("mauvaise entree")
              print("joueur: " + joueurName[joueur])
              x = input("Quelle valeur de x? ")
              y = input("Quelle valeur de y? ")
          x = int(x)
          y = int(y)
          grid = Remplace(x,y,grid)
          joueur = 1 - joueur
      MontreJeu(grid)
      print(joueurName[joueur] + " a gagne la partie")



  def MainGame():
      """
      permet de jouer au jeu en choisissant son mode (ex joueur vs IA)
      utilise Game_IA() et JoueurContreJoueur()"""
      # fait l'affichage et le jeu en lui meme
      mode = "start"
      while mode != "stop":
          print("Choisissez:")
          print("1: joueur contre IA")
          print("2: joueur contre joueur")
          mode = input()
          x = ""
          y = ""
          while VerifInput(x,30) or VerifInput(y,30):
              if x != "" and y != "":
                  print("Mauvaise entree !!")
              # Fait en sorte d'avoir un plateau de taille variee
              print("Choisissez la largeur de votre plateau (max: 30)")
              x = input()
              print("Choisissez la hauteur de votre plateau (max: 30)")
              y = input()

          if mode == "1":
              Game_IA(int(x),int(y))
          else:
              JoueurContreJoueur(int(x),int(y))
          print("Appuyez sur entre pour recommencer")
          mode = input()





  print("Pour commencer a jouer entrez 'MainGame()' dans la console")

</script>

</body>

</html>
